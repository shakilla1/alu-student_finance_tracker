<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Finance Tracker</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header>
        <div class="header-content">
            <div class="logo">
                 <span>Student Finance Tracker</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#dashboard" class="nav-link active" data-page="dashboard">Dashboard</a></li>
                    <li><a href="#records" class="nav-link" data-page="records">Records</a></li>
                    <li><a href="#add-record" class="nav-link" data-page="add-record">Add Record</a></li>
                    <li><a href="#settings" class="nav-link" data-page="settings">Settings</a></li>
                    <li><a href="#about" class="nav-link" data-page="about">About</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main id="main-content">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
            <h1>Dashboard</h1>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">Total Records</div>
                    <div class="stat-value" id="total-records">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Spent</div>
                    <div class="stat-value" id="total-spent">$0.00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Top Category</div>
                    <div class="stat-value" id="top-category">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Monthly Cap</div>
                    <div class="stat-value" id="monthly-cap">$500.00</div>
                    <div class="cap-status cap-ok" id="cap-status">
                        Under budget
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h2 class="chart-title">Spending Trend (Last 7 Days)</h2>
                <div class="chart-bars" id="spending-chart">
                    <!-- Chart bars will be generated by JS -->
                </div>
            </div>
        </section>
        
        <!-- Records Page -->
        <section id="records" class="page">
            <h1>Transaction Records</h1>
            
            <div class="controls">
                <div class="search-container">
                    <div class="search-input">
                        <input type="text" id="search-input" placeholder="Search transactions (regex supported)">
                        <button id="clear-search" class="btn btn-secondary">Clear</button>
                    </div>
                </div>
                <div class="sort-controls">
                    <select id="sort-by">
                        <option value="date-desc">Date (Newest)</option>
                        <option value="date-asc">Date (Oldest)</option>
                        <option value="amount-desc">Amount (High to Low)</option>
                        <option value="amount-asc">Amount (Low to High)</option>
                        <option value="description-asc">Description (A-Z)</option>
                        <option value="description-desc">Description (Z-A)</option>
                        <option value="category-asc">Category (A-Z)</option>
                    </select>
                </div>
            </div>
            
            <div class="table-container">
                <table id="records-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Category</th>
                            <th>Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="records-body">
                        <!-- Records will be populated by JS -->
                    </tbody>
                </table>
            </div>
            
            <div id="no-records" class="no-records">
                <p>No transactions found. Add your first transaction!</p>
            </div>
        </section>
        
        <!-- Add/Edit Record Page -->
        <section id="add-record" class="page">
            <h1 id="form-title">Add New Transaction</h1>
            
            <form id="record-form" class="form-container">
                <input type="hidden" id="record-id">
                
                <div class="form-group">
                    <label for="description">Description *</label>
                    <input type="text" id="description" required>
                    <div class="error-message" id="description-error">Description is required and cannot have leading/trailing spaces</div>
                </div>
                
                <div class="form-group">
                    <label for="amount">Amount ($)*</label>
                    <input type="text" id="amount" required>
                    <div class="error-message" id="amount-error">Enter a valid amount (e.g., 12.50)</div>
                </div>
                
                <div class="form-group">
                    <label for="category">Category *</label>
                    <select id="category" required>
                        <option value="">Select a category</option>
                        <option value="Food">Food</option>
                        <option value="Books">Books</option>
                        <option value="Transport">Transport</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Fees">Fees</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-message" id="category-error">Please select a category</div>
                </div>
                
                <div class="form-group">
                    <label for="date">Date *</label>
                    <input type="date" id="date" required>
                    <div class="error-message" id="date-error">Enter a valid date (YYYY-MM-DD)</div>
                </div>
                
                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">Save Transaction</button>
                    <button type="button" id="cancel-form" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </section>
        
        <!-- Settings Page -->
        <section id="settings" class="page">
            <h1>Settings</h1>
            
            <div class="form-container">
                <h2>Monthly Budget Cap</h2>
                <div class="form-group">
                    <label for="budget-cap">Monthly Spending Cap ($)</label>
                    <input type="text" id="budget-cap" value="500.00">
                    <div class="error-message" id="cap-error">Enter a valid amount</div>
                </div>
                
                <h2>Currency Settings</h2>
                <div class="settings-grid">
                    <div class="form-group">
                        <label for="base-currency">Base Currency</label>
                        <select id="base-currency">
                            <option value="USD">USD ($)</option>
                            <option value="EUR">EUR (€)</option>
                            <option value="GBP">GBP (£)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="exchange-rate">Exchange Rate (to USD)</label>
                        <input type="text" id="exchange-rate" value="1.00">
                        <div class="error-message" id="rate-error">Enter a valid exchange rate</div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="save-settings" class="btn btn-primary">Save Settings</button>
                    <button id="reset-settings" class="btn btn-secondary">Reset to Defaults</button>
                </div>
            </div>
            
            <div class="form-container">
                <h2>Data Management</h2>
                <div class="btn-group">
                    <button id="export-data" class="btn btn-primary">Export to JSON</button>
                    <button id="import-data" class="btn btn-secondary">Import from JSON</button>
                </div>
                <input type="file" id="import-file" accept=".json" style="display: none;">
            </div>
        </section>
        
        <!-- About Page -->
        <section id="about" class="page">
            <h1>About Student Finance Tracker</h1>
            <p>This application helps students track their finances, manage budgets, and gain insights into their spending habits.</p>
            
            <h2>Key Features</h2>
            <ul>
                <li>Track expenses with categories and descriptions</li>
                <li>Set monthly spending caps and receive alerts</li>
                <li>Powerful regex-based search functionality</li>
                <li>Export and import your financial data</li>
                <li>Fully responsive design for all devices</li>
            </ul>
            
            <h2>Contact Information</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <span></span>
                    <span>s.uwamahoro1@alustudent.com</span>
                </div>
                <div class="contact-item">
                     <span><a href="https://github.com/shakilla1/alu-student_finance_tracker" target="_blank">GitHub Repository</a></span>
                </div>
            </div>
        </section>
    </main>
    
    <!-- ARIA Live Region for Accessibility -->
    <div class="aria-live" aria-live="polite" id="aria-live-region"></div>
    
    <script src="scripts/storage.js"></script>
    <script src="scripts/state.js"></script>
    <script src="scripts/validators.js"></script>
    <script src="scripts/search.js"></script>
    <script src="scripts/ui.js"></script>
</body>
</html>
